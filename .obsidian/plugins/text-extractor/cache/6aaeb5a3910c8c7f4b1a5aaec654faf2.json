{"path":"docs/课程/高质量图像渲染/课件/ch2_concepts.pdf","text":"2024/3/12 Physically Based Rendering - Jie Guo 过 洁 南京大学计算机科学与技术系 guojie@nju.edu.cn 图形绘制技术（Rendering） Chapter 2: Rendering Concepts Contents ◼ Geometry Optics（光怎么传播） ◼ Radiometry and Color（光的能量怎么描述） ◼ BRDF and Reflection Functions（光和物体的交互） ◼ The Rendering Equation（统一的框架） 2024/3/12 Physically Based Rendering - Jie Guo Geometry Optics ◼ Law of linear propagation ◼ Law of reflection ◼ Law of refraction 2024/3/12 Physically Based Rendering - Jie Guo The illumination equation 42024/3/12 Physically Based Rendering - Jie Guo Reflection Refraction 2024/3/12 Physically Based Rendering - Jie Guo Reflection Vector Calculation ◼ N: surface normal ◼ L: vector pointing towards a light source ◼ R: reflected ray direction 2024/3/12 Physically Based Rendering - Jie Guo Reflection Vector Calculation ◼ N and L have been normalized to unit length 2024/3/12 Physically Based Rendering - Jie Guo Refraction Vector Calculation ◼ T: Refracted vector ◼ T is also normalized ◼ Snell’s law: 2024/3/12 Physically Based Rendering - Jie Guo Refraction Vector Calculation 2024/3/12 Physically Based Rendering - Jie Guo Refraction Vector Calculation 2024/3/12 Physically Based Rendering - Jie Guo Refraction Vector Calculation 2024/3/12 Physically Based Rendering - Jie Guo Total Internal Reflection: Basic Assumptions about Light ◼ Linearity: the combined effect of two inputs is equal to the sum of effects ◼ Energy conservation: scattering event can’t produce more energy than they started with ◼ Steady state: light is assumed to have reached equilibrium, so its radiance distribution isn’t changing over time. ◼ No polarization: we only care the frequency of light but not other properties (such as phases) ◼ No fluorescence or phosphorescence: behavior of light at a wavelength or time doesn’t affect the behavior of light at other wavelengths or time 2024/3/12 Physically Based Rendering - Jie Guo Radiometry ◼ Radiometry is the science of measuring radiant energy transfers. ◼ The study of the propagation of electromagnetic radiation in an environment ◼ Radiometric Quantities  Energy  Radiant power (total flux) Φ,𝑃  Irradiance (flux density) 𝐸  Radiosity (flux density) 𝐵  Intensity I  Radiance 𝐿 2024/3/12 Physically Based Rendering - Jie Guo Radiant Power (Flux) ◼ Total amount of energy passing through a surface per unit of time (J/s,W) 2024/3/12 Physically Based Rendering - Jie Guo Irradiance & Radiosity ◼ Irradiance E is the total radiant power per unit area (flux density) incident onto a surface with a fixed orientation. ◼ Radiosity B is defined as the total radiant power per unit area (flux density) leaving a surface. 2024/3/12 Physically Based Rendering - Jie Guo Irradiance ◼ Area density of flux (W/m2) 2024/3/12 Physically Based Rendering - Jie Guo dA d E  = 24 r E   = A E  = A E cos = Lambert’s lawInverse square law Angles and Solid Angles ◼ θ: the angle subtended by a curve in the plane is the length of the projected arc on the unit circle. ◼ ω: the solid angle subtended by an object is the surface area of its projection onto the unit sphere (steradians [sr]). 2024/3/12 Physically Based Rendering - Jie Guo Solid Angle for a Small Area ◼ The solid angle subtended by an (infinitely) small surface patch S with area dA is obtained by dividing the projected area d𝐴cos𝜃 by the square of the distance to the origin: 2024/3/12 Physically Based Rendering - Jie Guo Solid Angle in Spherical Coordinates 2024/3/12 Physically Based Rendering - Jie Guo Intensity ◼ Flux density per solid angle ◼ Intensity describes the directional distribution of light ◼ Isotropic point source 2024/3/12 Physically Based Rendering - Jie Guo d d I  = Intensity ◼ Warn’s spotlight 2024/3/12 Physically Based Rendering - Jie Guo  If the total flux is Φ, what is the intensity?     = otherwise c I S 0 cos )( 2   1S c2 0 1 1S y c2 coscosc2coscos 1S 1 0 1 0 2 0 + = = = + = == +      y y dddc SS  + = 2 1S c Irradiance: Isotropic Point Source 2024/3/12 Physically Based Rendering - Jie Guo Irradiance: Isotropic Point Source 2024/3/12 Physically Based Rendering - Jie Guo Irradiance: Isotropic Point Source 2024/3/12 Physically Based Rendering - Jie Guo Irradiance: Isotropic Point Source 2024/3/12 Physically Based Rendering - Jie Guo Irradiance: Isotropic Point Source 2024/3/12 Physically Based Rendering - Jie Guo Radiance ◼ Radiance 𝐿 is defined as the total flux (radiant power) traveling at some point 𝑥 in a specified direction 𝜔, per unit area perpendicular to the direction of travel, per unit solid angle. ◼ The differential flux radiated through the differential solid angle 𝑑𝜔, from the projected differential area 𝑑𝐴cos𝜃 is: 2024/3/12 Physically Based Rendering - Jie Guo Radiance in Space 2024/3/12 Physically Based Rendering - Jie Guo Radiance ◼ Uniform diffuse area source (with radius R) 2024/3/12 Physically Based Rendering - Jie Guo Calculate Irradiance From Radiance 2024/3/12 Physically Based Rendering - Jie Guo dAd ),( xLx   =  =  dxL dA d xE cos),()( Spectral Quantities ◼ Radiometric quantity per wavelength 2024/3/12 Physically Based Rendering - Jie Guo Spectrum 2024/3/12 Physically Based Rendering - Jie Guo 370 nm ~ 730 nm Spectral Power Distribution (SPD) ◼ A distribution function of wavelength that describes the amount of light at each wavelength 2024/3/12 Physically Based Rendering - Jie Guo spectral distribution of emission from a fluorescent light Color ◼ Need a compact, efficient and accurate way to represent functions like these ◼ Find proper basis functions to map the infinite- dimensional space of all possible SPD functions to a low-dimensional space of coefficients ◼ For example, B(λ)=1 is a trivial but bad approximation 2024/3/12 Physically Based Rendering - Jie Guo XYZ Color ◼ Tristimulus theory: all visible SPDs S can be accurately represented for human observers with three values, xλ, yλ and zλ. ◼ The basis are the spectral matching curves, X(λ), Y(λ) and Z(λ) determined by CIE. 2024/3/12 Physically Based Rendering - Jie Guo XYZ Color 2024/3/12 Physically Based Rendering - Jie Guo three matching curves XYZ Color ◼ 国际照明委员会(CIE)1931年制定，又称为“CIE1931标 准色度系统” ◼ XYZ color is device-independent. ◼ The y coordinate of XYZ color is closely related to luminance. 2024/3/12 Physically Based Rendering - Jie Guo RGB Color ◼ 与屏幕显示相关，最常用的颜色空间模型。 2024/3/12 Physically Based Rendering - Jie Guo RGB Color 2024/3/12 Physically Based Rendering - Jie Guo Red, Green, and Blue Emission Curves for an LCD Display Conversion between XYZ and RGB ◼ Given an representation of an SPD, we can convert it to corresponding RGB coefficients: 2024/3/12 Physically Based Rendering - Jie Guo Conversion between XYZ and RGB 2024/3/12 Physically Based Rendering - Jie Guo BRDF ◼ Bidirectional Reflectance Distribution Function ◼ BRDF 𝑓𝑟 describes surface reflection at a point 𝑥 for light incident from direction 𝜔𝑖 = 𝜃𝑖, 𝜑𝑖 reflected into direction 𝜔𝑟 = 𝜃𝑟, 𝜑𝑟 2024/3/12 Physically Based Rendering - Jie Guo BRDF ◼ 为什么BRDF要定义成辐射率（L）和辐照度（E）的比 值，而不是直接定义为辐射率和辐射率比值？ 2024/3/12 Physically Based Rendering - Jie Guo BRDF ◼ 为什么BRDF要定义成辐射率（L）和辐照度（E）的比 值，而不是直接定义为辐射率和辐射率比值？ ◼ 测平面上一点在某一个方向的出射辐射率很简单，只需要 用仪器（B）从该方向对准该点就可以了。而测平面一点 入射的辐射率则没有那么简单，必须保证光源正好覆盖测 量仪开口立体角，大了该点会接受到比测量值更多的光照， 导致测量值比实际值小，小了则与仪器的设计立体角不一 致，可在实际中是基本做不到光源大小正好覆盖测量仪开 口立体角的。而测表面的辐照度则简单得多，只要保证光 源很小，而且没有来自其他方向的光干扰，这时候测到的 辐照度就是平面上来自光源方向的微分辐照度。 2024/3/12 Physically Based Rendering - Jie Guo The Reflection Equation ◼ The reflected radiance is due to the radiance arriving from all directions weighted by the BRDF relating the incoming: 2024/3/12 Physically Based Rendering - Jie Guo The Reflection Equation ◼ Given the incident light distribution and the BRDF of the material, we can solve this equation. ◼ It is often called a local (direct) illumination model. ◼ The easiest case is one with no occlusion and direct illumination from a point light. 2024/3/12 Physically Based Rendering - Jie Guo 2024/3/12 Physically Based Rendering - Jie Guo Direct IlluminationThe Reflection Equation ◼ How to add shadows? ◼ How to extend to a global illumination model? 2024/3/12 Physically Based Rendering - Jie Guo The Rendering Equation ◼ Surface balance equation 2024/3/12 Physically Based Rendering - Jie Guo The Rendering Equation 2024/3/12 Physically Based Rendering - Jie Guo The Rendering Equation 2024/3/12 Physically Based Rendering - Jie Guo The Rendering Equation 2024/3/12 Physically Based Rendering - Jie Guo Solving The Rendering Equation ◼ Monte Carlo methods  Ray tracing  Path tracing (distributed ray tracing)  Bidirectional path tracing  Path guiding  Photon mapping  And more… ◼ Finite element methods  Classic radiosity 2024/3/12 Physically Based Rendering - Jie Guo Whitted ray-tracing algorithm 2024/3/12 Physically Based Rendering - Jie Guo Whitted ray-tracing algorithm 2024/3/12 Physically Based Rendering - Jie Guo Example: Reflections at depth = 0 2024/3/12 Physically Based Rendering - Jie Guo Example: Reflections at depth = 1 2024/3/12 Physically Based Rendering - Jie Guo Example: Reflections at depth = 2 2024/3/12 Physically Based Rendering - Jie Guo Example: Reflections at depth = 3 2024/3/12 Physically Based Rendering - Jie Guo Ray tracing example 2024/3/12 Physically Based Rendering - Jie Guo Ray tracing example 2024/3/12 Physically Based Rendering - Jie Guo Eye vs. light ray tracing 2024/3/12 Physically Based Rendering - Jie Guo Ray Casting v.s. Ray Tracing ◼ Direct illumination ◼ Indirect illumination ◼ Global illumination 2024/3/12 Physically Based Rendering - Jie Guo Ray Casting v.s. Ray Tracing 2024/3/12 Physically Based Rendering - Jie Guo","libVersion":"0.2.4","langs":""}