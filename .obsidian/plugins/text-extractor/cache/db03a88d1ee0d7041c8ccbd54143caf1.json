{"path":"pdf/课件/17-DynamProg.pdf","text":"D y n a m i c P r o g r a m m i n g - I I A l g o r i t h m : D e s i g n & A n a l y s i s [ 1 7 ] I n t h e l a s t c l a s s …  R e c u r s i o n a n d S u b p r o b l e m G r a p h  B a s i c I d e a o f D y n a m i c P r o g r a m m i n g  L e a s t C o s t o f M a t r i x M u l t i p l i c a t i o n  E x t r a c t i n g O p t i m a l M u l t i p l i c a t i o n O r d e r D y n a m i c P r o g r a m m i n g - I I  O p t i m a l B i n a r y S e a r c h T r e e  S e p a r a t i n g S e q u e n c e o f W o r d  C h a n g i n g C o i n s  D y n a m i c P r o g r a m m i n g A l g o r i t h m s B i n a r y S e a r c h T r e e 3 0 2 0 4 0 5 0 8 0 6 0 4 0 2 0 6 0 5 0 8 0 3 0 P o o r b a l a n c i n g  ( n ) • E a c h n o d e h a s a k e y , b e l o n g i n g t o a l i n e a r o r d e r e d s e t • A n i n o r d e r t r a v e r s a l p r o d u c e s a s o r t e d l i s t o f t h e k e y s I n a p r o p e r l y d r a w n t r e e , p u s h i n g f o r w a r d t o g e t t h e o r d e r e d l i s t . G o o d b a l a n c i n g  ( l o g n ) K e y s w i t h D i f f e r e n t F r e q u e n c i e s w i n g ( 0 . 0 5 0 ) r i n g ( 0 . 0 7 5 ) t h e ( 0 . 1 5 0 ) c a b b a g e ( 0 . 0 2 5 ) h a s ( 0 . 0 2 5 ) s a i d ( 0 . 0 7 5 ) k i n g ( 0 . 0 5 0 ) p i g ( 0 . 0 2 5 ) o f ( 0 . 1 2 5 ) t h i n g ( 0 . 0 7 5 ) t i m e ( 0 . 0 5 0 ) c o m e ( 0 . 0 5 0 ) a n d ( 0 . 1 5 0 ) w a l r u s ( 0 . 0 2 5 ) t a l k ( 0 . 0 5 0 ) A b i n a r y s e a r c h t r e e p e r f e c t l y b a l a n c e d S i n c e t h e k e y s w i t h l a r g e s t f r e q u e n c i e s h a v e l a r g e s t d e p t h , t h i s t r e e i s n o t o p t i m a l . A v e r a g e : 3 . 3 5 ⼈ 0 . 50 . 4 号 权值 × 深度 I m p r o v e d f o r a B e t t e r A v e r a g e w i n g ( 0 . 0 5 0 ) r i n g ( 0 . 0 7 5 ) t h e ( 0 . 1 5 0 ) c a b b a g e ( 0 . 0 2 5 ) h a s ( 0 . 0 2 5 ) s a i d ( 0 . 0 7 5 ) k i n g ( 0 . 0 5 0 ) p i g ( 0 . 0 2 5 ) o f ( 0 . 1 2 5 ) t h i n g ( 0 . 0 7 5 ) t i m e ( 0 . 0 5 0 ) c o m e ( 0 . 0 5 0 ) a n d ( 0 . 1 5 0 ) w a l r u s ( 0 . 0 2 5 ) t a l k ( 0 . 0 5 0 ) = 2 . 9 1 5 P l a n o f O p t i m a l B i n a r y T r e e K k K 1 , … K k - 1 K k + 1 , … K n F o r e a c h s e l e c t e d r o o t K k , t h e l e f t a n d r i g h t s u b t r e e s a r e o p t i m i z e d . T h e p r o b l e m i s d e c o m p o s e s b y t h e c h o i c e s o f t h e r o o t . M i n i m i z i n g o v e r a l l c h o i c e s T h e s u b p r o b l e m s c a n b e i d e n t i f i e d s i m i l a r l y a s f o r m a t r i x m u l t O r d e r S u b p r o b l e m s a s l e f t a n d r i g h t s u b t r e e s P r o b l e m R e p h r a s e d  S u b p r o b l e m i d e n t i f i c a t i o n  T h e k e y s a r e i n s o r t e d o r d e r .  E a c h s u b p r o b l e m c a n b e i d e n t i f i e d a s a p a i r o f i n d e x ( l o w , h i g h )  E x p e c t e d s o l u t i o n o f t h e s u b p r o b l e m  F o r e a c h k e y K i , a w e i g h t p i i s a s s o c i a t e d . N o t e : p i i s t h e p r o b a b i l i t y t h a t t h e k e y i s s e a r c h e d f o r .  T h e s u b p r o b l e m ( l o w , h i g h ) i s t o f i n d t h e b i n a r y s e a r c h t r e e w i t h m i n i m u m w e i g h t e d r e t r i e v a l c o s t . M i n i m u m W e i g h t e d R e t r i e v a l C o s t  A ( l o w , h i g h , r ) i s t h e m i n i m u m w e i g h t e d r e t r i e v a l c o s t f o r s u b p r o b l e m ( l o w , h i g h ) w h e n K r i s c h o s e n a s t h e r o o t o f i t s b i n a r y s e a r c h t r e e .  A ( l o w , h i g h ) i s t h e m i n i m u m w e i g h t e d r e t r i e v a l c o s t f o r s u b p r o b l e m ( l o w , h i g h ) o v e r a l l c h o i c e s o f t h e r o o t k e y .  p ( l o w , h i g h ) , e q u a l t o p l o w + p l o w + 1 + … + p h i g h , i s t h e w e i g h t o f t h e s u b p r o b l e m ( l o w , h i g h ) . N o t e : p ( l o w , h i g h ) i s t h e p r o b a b i l i t y t h a t t h e k e y s e a r c h e d f o r i s i n t h i s i n t e r v a l . I n t e g r a t i n g S o l u t i o n s o f S u b p r o b l e m  W e i g h t e d r e t r i e v a l c o s t o f a s u b t r e e  L e t T i s a p a r t i c u l a r t r e e c o n t a i n i n g K l o w , … , K h i g h , t h e w e i g h t e d r e t r i e v a l c o s t o f T i s W , w i t h T b e i n g a w h o l e t r e e . T h e n , a s a s u b t r e e w i t h t h e r o o t a t l e v e l 1 , t h e w e i g h t e d r e t r i e v a l c o s t o f T w i l l b e : W + p ( l o w , h i g h )  S o , t h e r e c u r s i v e r e l a t i o n s :  A ( l o w , h i g h , r ) = p r + p ( l o w , r - 1 ) + A ( l o w , r - 1 ) + p ( r + 1 , h i g h ) + A ( r + 1 , h i g h ) = p ( l o w , h i g h ) + A ( l o w , r - 1 ) + A ( r + 1 , h i g h )  A ( l o w , h i g h ) = m i n { A ( l o w , h i g h , r ) | l o w  r  h i g h } ⾼度 + 1 故 wig ht 加 PL A v o i d i n g R e p e a t e d W o r k b y S t o r i n g  A r r a y c o s t : c o s t [ l o w ] [ h i g h ] g i v e s t h e m i n i m u m w e i g h t e d s e a r c h c o s t o f s u b p r o b l e m ( l o w , h i g h ) .  A r r a y r o o t : r o o t [ l o w ] [ h i g h ] g i v e s t h e b e s t c h o i c e o f r o o t f o r s u b p r o b l e m ( l o w , h i g h )  T h e c o s t [ l o w ] [ h i g h ] d e p e n d s u p o n s u b p r o b l e m s w i t h h i g h e r f i r s t i n d e x ( r o w n u m b e r ) a n d l o w e r s e c o n d i n d e x ( c o l u m n n u m b e r ) C o m p u t a t i o n o f t h e A r r a y c o s t h i g h l o w 0 0 0 0 0 0 1 2 . . . . . . n 0 0 p n p 3 p 2 p 1...... 1 2 n + 1...... c o s t [ l o w ] [ h i g h ] b e s t C h o i c e ( p r o b , c o s t , r o o t , l o w , h i g h ) i f ( h i g h < l o w ) b e s t C o s t = 0 ; b e s t R o o t = - 1 ; e l s e b e s t C o s t =  ; f o r ( r = l o w ; r  h i g h ; r + + ) r C o s t = p ( l o w , h i g h ) + c o s t [ l o w ] [ r - 1 ] + c o s t [ r + 1 ] [ h i g h ] ; i f ( r C o s t < b e s t C o s t ) b e s t C o s t = r C o s t ; b e s t R o o t = r ; c o s t [ l o w ] [ h i g h ] = b e s t C o s t ; r o o t [ l o w ] [ h i g h ] = b e s t R o o t ; r e t u r n O p t i m a l B S T : D P A l g o r i t h m o p t i m a l B S T ( p r o b , n , c o s t , r o o t ) f o r ( l o w = n + 1 ; l o w  1 ; l o w - - ) f o r ( h i g h = l o w - 1 ; h i g h  n ; h i g h + + ) b e s t C h o i c e ( p r o b , c o s t , r o o t , l o w , h i g h ) r e t u r n c o s t i n  ( n 3 ) S e p a r a t i n g S e q u e n c e o f W o r d s  W o r d - l e n g t h w 1 , w 2 , … , w n a n d l i n e - w i d t h : W  B a s i c c o n s t r a i n t : i f w i , w i + 1 , … , w j a r e i n o n e l i n e , t h e n w i + w i + 1 + … + w j  W  P e n a l t y f o r o n e l i n e : s o m e f u n c t i o n o f X . X i s :  0 f o r t h e l a s t l i n e i n a p a r a g r a p h , a n d  W – ( w i + w i + 1 + … + w j ) f o r o t h e r l i n e s  T h e p r o b l e m  h o w t o s e p a r a t e a s e q u e n c e o f w o r d s ( f o r m i n g a p a r a g r a p h ) i n t o l i n e s , m a k i n g t h e p e n a l t y o f t h e p a r a g r a p h , w h i c h i s t h e s u m o f t h e p e n a l t i e s o f i n d i v i d u a l l i n e s , m i n i m i z e d . 最⼩空余 最后⼀⾏不计 λ 0 S o l u t i o n b y G r e e d y S t r a t e g y i w o r d 1 T h o s e 2 w h o 3 c a n n o t 4 r e m e m b e r 5 t h e 6 p a s t 7 a r e 8 c o n d e m n e d 9 t o 1 0 r e p e a t 1 1 i t . w 6 4 7 9 4 5 4 1 0 3 7 4 W i s 1 7 , a n d p e n a l t y i s X 3 S o l u t i o n b y g r e e d y s t r a t e g y w o r d s ( 1 , 2 , 3 ) ( 4 , 5 ) ( 6 , 7 ) ( 8 , 9 ) ( 1 0 , 1 1 ) X 0 4 8 4 0 p e n a l t y 0 6 4 5 1 2 6 4 0 T o t a l p e n a l t y i s 6 4 0 A n i m p r o v e d s o l u t i o n w o r d s ( 1 , 2 ) ( 3 , 4 ) ( 5 , 6 , 7 ) ( 8 , 9 ) ( 1 0 , 1 1 ) X 7 1 4 4 0 p e n a l t y 3 4 3 1 6 4 6 4 0 T o t a l p e n a l t y i s 4 7 2 — ~~ 权值以以来计 P r o b l e m D e c o m p o s i t i o n  R e p r e s e n t a t i o n o f s u b p r o b l e m : a p a i r o f i n d e x e s ( i , j ) , b r e a k i n g w o r d s i t h r o u g h j i n t o l i n e s w i t h m i n i m u m p e n a l t y .  T w o k i n d s o f s u b p r o b l e m  ( k , n ) : t h e p e n a l t y o f t h e l a s t l i n e i s 0  a l l o t h e r s u b p r o b l e m s  F o r s o m e k , t h e c o m b i n a t i o n o f t h e o p t i m a l s o l u t i o n f o r ( 1 , k ) a n d ( k + 1 , n ) g i v e s a o p t i m a l s o l u t i o n f o r ( 1 , n ) .  S u b p r o b l e m g r a p h  A b o u t n 2 v e r t i c e s  E a c h v e r t e x ( i , j ) h a s a e d g e t o a b o u t j – i o t h e r v e r t i c e s , s o , t h e n u m b e r o f e d g e s i s i n  ( n 3 ) S i m p l e r I d e n t i f i c a t i o n o f s u b p r o b l e m  I f a s u b p r o b l e m c o n c l u d e s t h e p a r a g r a p h , t h e n ( k , n ) c a n b e s i m p l i f i e d a s ( k ) . T h e r e a r e a b o u t k s u b p r o b l e m s l i k e t h i s .  C a n w e e l i m i n a t e t h e u s e o f ( i , j ) w i t h j < n ?  P u t t h e f i r s t k w o r d s i n t h e f i r s t l i n e ( w i t h t h e b a s i c c o n s t r a i n t s a t i s f i e d ) , t h e s u b p r o b l e m t o b e s o l v e d i s ( k + 1 , n )  O p t i m i z i n g t h e s o l u t i o n o v e r a l l k ’ s . ( k i s a t m o s t W / 2 ) I n D P v e r s i o n , “ S t o r i n g ” i n s e r t e d B r e a k i n g S e q u e n c e i n t o l i n e s l i n e B r e a k ( w , W , i , n , L ) i f ( w i + w i + 1 + … + w n  W ) < P u t a l l w o r d s o n l i n e L , s e t p e n a l t y t o 0 > e l s e f o r ( k = 1 ; w i + … + w i + k - 1  W ; k + + ) X = W - ( w i + … + w i + k - 1 ) ; k P e n a l t y = l i n e C o s t ( X ) + l i n e B r e a k ( w , W , i + k , n , L + 1 ) < S e t p e n a l t y a l w a y s t o t h e m i n i m u m k P e n a l t y > < U p d a t i n g k m i n , w h i c h r e c o r d s t h e k t h a t p r o d u c e d t h e m i n i m u m p e n a l t y > < P u t w o r d s i t h r o u g h i + k m i n - 1 o n l i n e L > r e t u r n p e n a l t y I n D P v e r s i o n t h i s i s r e p l a c e d b y “ R e c u r s i o n o r R e t r i e v e ” C 未记忆化 ) 后从向前遍币 ← 可为最后⼀⾏的 ( k , n ) 上最⼩ penalty ) ⼀ 0 ⼀ ⼀ A n a l y s i s o f l i n e B r e a k  S i n c e e a c h s u b p r o b l e m i s i d e n t i f i e d b y o n l y o n e i n t e g e r k , f o r ( k , n ) , t h e n u m b e r o f v e r t e x i n t h e s u b p r o b l e m i s a t m o s t n .  S o , i n D P v e r s i o n , t h e r e c u r s i o n i s e x e c u t e d a t m o s t n t i m e s .  T h e l o o p i s e x e c u t e d a t m o s t W / 2 t i m e s .  S o , t h e r u n n i n g t i m e i s i n  ( W n ) . I n f a c t , W , t h e l i n e w i d t h , i s u s u a l l y a c o n s t a n t . S o ,  ( n ) .  T h e e x t r a s p a c e f o r t h e d i c t i o n a r y i s i n  ( n ) . M a k i n g C h a n g e : R e v i s i t e d  P r o b l e m : w i t h c e r t a i n s y s t e m s o f c o i n a g e , h o w t o p a y a g i v e n a m o u n t u s i n g t h e s m a l l e s t p o s s i b l e n u m b e r o f c o i n s  W e h a v e k n o w n t h a t t h e g r e e d y s t r a t e g y f a i l s s o m e t i m e s S u b p r o b l e m s  S u p p o s e t h e c u r r e n c y w e a r e u s i n g h a s a v a i l a b l e c o i n s o f n d i f f e r e n t d e n o t a t i o n s , a n d a c o i n o f d e n o m i n a t i o n i h a s d i u n i t s . T h e a m o u n t t o b e p a i d i s N .  O n e s u b p r o b l e m c a n b e r e p r e s e n t e d a s [ i , j ] , f o r w h i c h t h e r e s u l t i s t h e m i n i m u m n u m b e r o f c o i n s r e q u i r e d t o p a y a n a m o u n t o f j u n i t s , u s i n g o n l y c o i n s o f d e n o m i n a t i o n s 1 t o i .  T h e s o l u t i o n o f t h e p r o b l e m o f m a k i n g c h a n g e i s t h e r e s u l t o f s u b p r o b l e m [ n , N ] ( a s c [ n , N ] ) D e p e n d e n c y o f S u b p r o b l e m s  c [ i , 0 ] i s 0 f o r a l l i  W h e n w e a r e t o p a y a n a m o u n t j u s i n g c o i n s o f d e n o m i n a t i o n s 1 t o i , w e h a v e t w o c h o i c e s :  N o c o i n s o f d e n o m i n a t i o n i i s u s e d : c [ i - 1 , j ]  O n e c o i n s o f d e n o m i n a t i o n i i s u s e d : 1 + c [ i , j - d i ]  S o , c [ i , j ] = m i n ( c [ i - 1 , j ] , 1 + c [ i , j - d i ] ) D a t a S t r u c t u r e D e f i n e a a r r a y c o i n [ 1 . . n , 0 . . N ] f o r a l l c [ i , j ] d 1 = 1 d 2 = 4 d 3 = 6 0 1 2 3 4 5 6 7 8 a n e x a m p l e d i r e c t i o n o f c o m p u t a t i o n T h e P r o c e d u r e i n t c o i n C h a n g e ( i n t N , i n t n , i n t [ ] c o i n ) i n t d e n o m i n a t i o n [ ] = [ d 1 , d 2 , . . . , d n ] ; f o r ( i = 1 ; i  n ; i + + ) c o i n [ i , 0 ] = 0 ; f o r ( i = 1 ; i  n ; i + + ) f o r ( j = 1 ; i  N ; j + + ) i f ( i = = 1 & & j < d e n o m i n a t i o n [ i ] ) c o i n [ i , j ] = +  ; e l s e i f ( i = = 1 ) c o i n [ i , j ] = 1 + c o i n [ 1 , j - d e n o m i n a t i o n [ 1 ] ] ; e l s e i f ( j < d e n o m i n a t i o n [ i ] ) c o i n [ i , j ] = c o s t [ i - 1 , j ] ; e l s e c o i n [ i , j ] = m i n ( c o i n [ i - 1 , j ] , 1 + c o i n [ i , j - d e n o m i n a t i o n [ i ] ; r e t u r n c o i n [ n , N ] ; i n  ( n N ) , n i s u s u a l l y a c o n s t a n t P r i n c i p l e o f O p t i m a l i t y  G i v e n a n o p t i m a l s e q u e n c e o f d e c i s i o n s , e a c h s u b s e q u e n c e m u s t b e o p t i m a l b y i t s e l f .  P o s i t i v e e x a m p l e : s h o r t e s t p a t h  C o u n t e r e x a m p l e : l o n g e s t ( s i m p l e ) p a t h  U s u a l l y , d y n a m i c p r o g r a m m i n g m a y b e u s e d w h e r e t h e p r i n c i p l e o f o p t i m a l i t y a p p l i e s .  S o , t h e o p t i m a l s o l u t i o n t o a n y n o n t r i v i a l i n s t a n c e o f a p r o b l e m i s a c o m b i n a t i o n o f o p t i m a l s o l u t i o n s t o s o m e o f i t s s u b - i n s t a n c e s . H o w e v e r , i t i s n o t u s u a l l y o b v i o u s w h i c h s u b - i n s t a n c e s a r e r e l e v a n t t o t h e i n s t a n c e u n d e r c o n s i d e r a t i o n . s y t H o m e A s s i g n m e n t s  p p . 4 7 7 -  1 0 . 1 0  1 0 . 1 1  1 0 . 1 2  1 0 . 1 4  1 0 . 1 5","libVersion":"0.2.4","langs":""}