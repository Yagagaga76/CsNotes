{"path":"pdf/金融风险管理/8 情景分析和压力测试.pdf","text":"情景分析和压力测试 主讲教师：刘烨 南京大学工程管理学院 Financial Risk Management 第8章 1 引子：现实重要性 • 如果只从2008年金融危机吸取一个教训，那就是：应该更加重视压力测试 （Stress Testing）。——John C. Hull • 测试的目的是评估极端情况的影响，这些情况可能发生，但没有被VaR模型所考虑。 2 预期损失未预期损失 C% T时期内，C%置 信水平下的最 大可能损失 0A B 引子：现实重要性 • 如果只从2008年金融危机吸取一个教训，那就是:应该更加重视压力测试 （Stress Testing）。——John C. Hull • 测试的目的是评估极端情况的影响，这些情况可能发生，但没有被VaR模型所考虑。 • 电影《Margin Call》（《利益风暴》，又名《商海通牒》）片段（00:20:04— 00:24:30） • 金融危机爆发前夕的华尔街，一家投行的分析师发现公司财产评估上的漏洞： • 公司持有的大量MBS(按揭抵押证券)头寸将因市场波动和房地产倒退而带来超过该公司总市值的 损失，这将导致银行破产。 • 公司决定，第二天一开盘就以极低的价格抛售这些一文不值的证券。 • 如此以来，虽然该投行能暂时安稳，却会引发连锁反应。（择优而栖现象） 3 引子：现实重要性 • 巴塞尔委员会《Principles for Sound Stress-Testing Practices and Supervision》(《稳健的压力测试实践和监管原则》)，2009。 • 我国《商业银行资本管理办法（试行）》关于压力测试的相关规定。 4 本章目录 • 1.为什么要进行压力测试 • 2.情景分析法 • 3.系统化压力测试 • 实验8：某商业银行存贷款业务压力测试（情景分析法） • 实验8’：用DerivaGem软件模拟压力测试（系统化压力测试） 5 1.为什么要进行压力测试——VaR模型的不足 • 最常用的VaR计算方法是历史模拟法，以前面课上例子为例： • 举例：投资者在2008年9月25日持有一个价值为1000万美元的投资组合，组 合中有四个股票指数；美国道琼斯工业指数（DJIA），英国FTSE100指数，法 国CAC40指数，日本的Nikkei225指数。每个指数在2008年9月25日的取值如 下表。请计算置信度99%下该投资组合的日VaR。 • 第一步，确定风险因子。就将这四个指数作为其风险因子。 • 第二步，收集过去501天（2008年9月25日及之前的501个交易日）这四个指数的收盘价。 第三步，计算这四个指数明天（2008年9月26日）500种不同情形的取值。 • 第四步，计算该投资组合明天（2008年9月26日）500种不同情形的损失值。 • 第五步，将不同情形下的损失根据大小排序，再计算对应的VaR。 • 第六步，VaR精确度评估。 • 如果某极端情景未在上述历史区间内发生，那么，该极端情景就不会被VaR模 型所考虑。 1.为什么要进行压力测试——VaR模型的不足 • 最常用的VaR计算方法是历史模拟法，以前面课上例子为例： • 举例：投资者在2008年9月25日持有一个价值为1000万美元的投资组合，组 合中有四个股票指数；美国道琼斯工业指数（DJIA），英国FTSE100指数，法 国CAC40指数，日本的Nikkei225指数。每个指数在2008年9月25日的取值如 下表。请计算置信度99%下该投资组合的日VaR。 • 第一步，确定风险因子。就将这四个指数作为其风险因子。 • 第二步，收集过去501天（2008年9月25日及之前的501个交易日）这四个指数的收盘价。 第三步，计算这四个指数明天（2008年9月26日）500种不同情形的取值。 • 第四步，计算该投资组合明天（2008年9月26日）500种不同情形的损失值。 • 第五步，将不同情形下的损失根据大小排序，再计算对应的VaR。 • 第六步，VaR精确度评估。 • 如果某极端情景未在上述历史区间内发生，那么，该极端情景就不会被VaR模 型所考虑。 1.为什么要进行压力测试 • 压力测试目的：评估金融机构的产品组合在极端市场条件下的表现。 • 压力测试的两类主要方法： 8 情景分析法 系统化 压力测试 1 2(, , , )nP Pf f f∆= ∆  目录 • 1.为什么要进行压力测试 • 2.情景分析法 • 3.系统化压力测试 • 实验8：某商业银行存贷款业务压力测试实验 • 实验9：用DerivaGem软件模拟压力测试 9 2. 情景分析法 情景分析法：评估一个或几个市场变量（市场风险因子）突然从当前市场 情景变化到某些极端情景或事件的过程中对资产组合价值变化的影响程度。 主要包含两个关键步骤： 10 情景构 造 情景评 估 情景分 析法 1 2(, , , )nP Pf f f∆= ∆  2. 情景分析法——情景构造 • DPG（美国场外交易业衍生产品政策集团）建议银行在实施压力测试时 包括以下核心风险因子： ① 收益率曲线的平行移动。 ② 收益率曲线斜率的变化。 ③ 上述两者的综合。 ④ 收益率波动率的变化。 ⑤ 股票指数的变化。 ⑥ 股票指数波动率的变化。 ⑦ 主要货币汇率（相对于美元）的变化。 ⑧ 汇率波动性的变化。 11 2. 情景分析法——情景构造 • Case 1：对单一风险因子进行压力测试 针对上述核心风险因子，DPG建议采用以下标准构造极端情景 ① 收益率曲线向上或向下平行移动100个基点。 ② 收益率曲线的斜率增加或者减小25个基点（对2年到10年的成熟期而言）。 ③ 上述两种情景的两两组合（共有四种情景，例如，收益率曲线向上平行移动100个基点、同时收 益率曲线的斜率增加25个基点就是其中之一，其他可类似得到）。 ④ 所有3个月收益率的波动率增加或者降低当前收益率波动率的20%。 ⑤ 股票指数上升或者下降10%。 ⑥ 股票指数的波动率上升或者下降的幅度为当前波动率的20%。 ⑦ 所有主要货币相对于美元的汇率上升或者下降6%，而其他货币相对于美元的汇率上升或者下降 20%。 ⑧ 汇率的波动率上升或者下降的幅度为当前汇率波动率的20%。 12 2. 情景分析法——情景构造 • Case 1：对单一风险因子进行压力测试 针对上述核心风险因子，DPG建议采用以下标准构造极端情景 ① 收益率曲线向上或向下平行移动100个基点。 ② 收益率曲线的斜率增加或者减小25个基点（对2年到10年的成熟期而言）。 ③ 上述两种情景的两两组合（共有四种情景，例如，收益率曲线向上平行移动100个基点、同时收 益率曲线的斜率增加25个基点就是其中之一，其他可类似得到）。 ④ 所有3个月收益率的波动率增加或者降低当前收益率波动率的20%。 ⑤ 股票指数上升或者下降10%。 ⑥ 股票指数的波动率上升或者下降的幅度为当前波动率的20%。 ⑦ 所有主要货币相对于美元的汇率上升或者下降6%，而其他货币相对于美元的汇率上升或者下降 20%。 ⑧ 汇率的波动率上升或者下降的幅度为当前汇率波动率的20%。 13 由于变化幅度太大，不 能采用Delta、Gamma 等灵敏度指标衡量风险 。 2. 情景分析法——情景构造 • Case 1：对单一风险因子进行压力测试 • Case 2：对多个风险因子进行压力测试（当市场受压时，变量的相关性 会增大） • 流行的做法：采用历史上曾出现过的极端变化情景。比如2008年9月5日雷曼兄弟 宣告破产当天（这一天市场剧烈变化）。 • 另一种做法：选取市场趋向不利但变化比较温和的时期，然后将这一时期的实际 变化幅度放大3-5倍。 • 核心变量vs周边变量：以上只考虑了核心风险因子，那些未被测试的周 边风险因子被假设没有发生变化。 • 对改进的方法：建立周边风险因子对核心风险因子的回归，预测周边风险因子的 变化程度与核心风险因子变化程度的关系，最后将这些预测用于压力测试中。 14 2. 情景分析法——情景构造 • Case 1：对单一风险因子进行压力测试 • Case 2：对多个风险因子进行压力测试（当市场受压时，变量的相关性 会增大） • 流行的做法：采用历史上曾出现过的极端变化情景。比如2008年9月5日雷曼兄弟 宣告破产当天（这一天市场剧烈变化）。 • 另一种做法：选取市场趋向不利但变化比较温和的时期，然后将这一时期的实际 变化幅度放大3-5倍。 • 核心变量vs周边变量：以上只考虑了核心风险因子，那些未被测试的周 边风险因子被假设没有发生变化。 • 改进的方法：建立周边风险因子对核心风险因子的回归，预测周边风险因子的变 化程度与核心风险因子变化程度的关系，最后将这些预测用于压力测试中。 15 2. 情景分析法——情景构造 • Case 1：对单一风险因子进行压力测试 • Case 2：对多个风险因子进行压力测试（当市场受压时，变量的相关性 会增大） • 流行的做法：采用历史上曾出现过的极端变化情景。比如2008年9月5日雷曼兄弟 宣告破产当天（这一天市场剧烈变化）。 • 另一种做法：选取市场趋向不利但变化比较温和的时期，然后将这一时期的实际 变化幅度放大3-5倍。 • 管理人员要确认，以上情景构造既要考虑市场剧烈变化对金融机构自身 产品组合的即时效应（immediate effect），同时还要考虑来自其他众 多金融机构的连带效应（knock-on effect）. • 金融机构往往受到相同冲击，并作出相同反应。 16 2. 情景分析法——情景评估 • 情景评估：对极端情景下资产组合价值的可能变化进行评估。 • 根据资产定价映射关系，得到市场极端情景下的组合价值； • 减去组合当前市场价值，得到极端情景发生时组合价值在未来的一个变化量。 • 风险管理人员的难题：面对两个分开的报告，一个通过基于历史模拟法的VaR模型生 成，一个通过压力测试生成，应基于哪个报告决策？ • 两者结合：假定有ns数量的压力测试情景，这些情景所对应的的总概率为p，nk 数量的通过历史模拟出来的情景，这些情景所对应的的总概率为1-p，在此基础 上计算VaR. • 其中，p的估计是难点，分类可能如下： 0.05%，非常极端事件，每2000个情景中出现一次 0.2%，非常事件，在具有500个情景的历史模拟中，每个情景均对应这一概率 0.5%，小概率事件 17 2. 情景分析法——情景评估 • 情景评估：对极端情景下资产组合价值的可能变化进行评估。 • 根据资产定价映射关系，得到市场极端情景下的组合价值； • 减去组合当前市场价值，得到极端情景发生时组合价值在未来的一个变化量。 • 风险管理人员的难题：面对两个分开的报告，一个通过基于历史模拟法的VaR模型生 成，一个通过压力测试生成，应基于哪个报告决策？ • 两者结合：假定有ns数量的压力测试情景，这些情景所对应的的总概率为p，nk 数量的通过历史模拟出来的情景，这些情景所对应的的总概率为1-p，在此基础 上计算VaR. • 其中，p的估计是难点，分类可能如下： 0.05%，非常极端事件，每2000个情景中出现一次 0.2%，非常事件，在具有500个情景的历史模拟中，每个情景均对应这一概率 0.5%，小概率事件 18 2. 情景分析法——情景评估 • 情景评估：对极端情景下资产组合价值的可能变化进行评估。 • 根据资产定价映射关系，得到市场极端情景下的组合价值； • 减去组合当前市场价值，得到极端情景发生时组合价值在未来的一个变化量。 • 风险管理人员的难题：面对两个分开的报告，一个通过基于历史模拟法的VaR模型生 成，一个通过压力测试生成，应基于哪个报告决策？ • 两者结合：假定有ns数量的压力测试情景，这些情景所对应的的总概率为p，nk 数量的通过历史模拟出来的情景，这些情景所对应的的总概率为1-p，在此基础 上计算VaR. • 其中，p的估计是难点，分类可能如下： 0.05%，非常极端事件，每2000个情景中出现一次 0.2%，非常事件，在具有500个情景的历史模拟中，每个情景均对应这一概率 0.5%，小概率事件 19 2. 情景分析法——情景评估 举例：投资者在2008年9月25日持有一个价值为1000万美元的投资组合，组合中有四个股票指数； 美国道琼斯工业指数（DJIA），英国FTSE100指数，法国CAC40指数，日本的Nikkei225指数。 每个指数在2008年9月25日的取值如下表。请计算置信度为99%下该投资组合的日VaR。 表1 投资组合（单位：千美元） 指数 DJIA FTSE100 CAC40 Nikkei225 总计 组合价值 4000 3000 1000 2000 10000 表2：采用历史模拟法得到的500种损失情景 情景编号 损失数量（单位：千美元） V494 477.841 V339 345.435 V349 282.204 V329 277.041 V487 253.385 v131 217.974 …… …… 表3：五种极端情景下的损失 情景编号 损失数量 （单位：千美元） 概率 S1 235 0.5% S2 300 0.2% S3 450 0.2% S4 750 0.05% S5 850 0.05% 2. 情景分析法——情景评估 21 Scenario Loss ($000s) Probability Cumul. Probability s5 850.000 0.00050 0.00050 s4 750.000 0.00050 0.00100 V494 477.841 0.00198 0.00298 S3 450.000 0.00200 0.00498 V339 345.435 0.00198 0.00696 S2 300.000 0.00200 0.00896 V349 282.204 0.00198 0.01094 V329 277.401 0.00198 0.01292 V487 253.385 0.00198 0.01490 S1 235.000 0.00500 0.01688 V227 217.974 0.00198 0.02188 V131 205.256 0.00198 0.02386 V238 201.389 0.00198 0.02584 …. …. …. …. …. …. …. …. 置信水平为99%时， VaR为282204美元 本章目录 • 1.为什么要进行压力测试 • 2.情景分析法 • 3.系统化压力测试 • 实验8：某商业银行存贷款业务压力测试（情景分析法） • 实验9：用DerivaGem软件模拟压力测试（系统化压力测试） 22 3. 系统化压力测试 • 系统化压力测试：一定条件下，对影响资产组合价值P 的风险因子r1，r2，…， rn，采用数学或者统计方法生成大量市场情景，然后评估这些情景对资产组合 价值变化的影响，从中搜寻最坏情景（Worst-case Scenarios） ，即导致资 产组合价值损失最大的压力情景。 • 与情景分析法的主要区别：  前者针对一系列不同的压力情景进行压力测试，因此更加彻底、系统化；  前者既考虑了风险因子在历史上的极端变动，又考虑到未来潜在的所有可能压力情景，因 而本质上是一种前瞻性的情景分析法；  前者考虑了资产组合的风险特征在确定其最坏情景过程中的作用。 23 3. 系统化压力测试 • 基本思路：转化为以下最优化问题 • 基本步骤： 24 合理性条件C 价值函数P（r） 允许域D 最坏情景r* 𝑟𝑟∗ = 𝑎𝑎𝑟𝑟𝑎𝑎min 𝑟𝑟∈𝐷𝐷 }{𝑃𝑃(𝑟𝑟1, 𝑟𝑟2,⋅⋅⋅, 𝑟𝑟𝑛𝑛) 3. 系统化压力测试 • 基本思路：转化为以下最优化问题 • 基本步骤： 25 合理性条件C 价值函数P（r） 允许域D 最坏情景r* 合理性条件C ：只在满足一定合理 性（发生概率满足一定条件）的 市场情景中搜索。 𝑟𝑟∗ = 𝑎𝑎𝑟𝑟𝑎𝑎min 𝑟𝑟∈𝐷𝐷 }{𝑃𝑃(𝑟𝑟1, 𝑟𝑟2,⋅⋅⋅, 𝑟𝑟𝑛𝑛) 3. 系统化压力测试 • 基本思路：转化为以下最优化问题 • 基本步骤： 26 合理性条件C 价值函数P（r） 允许域D 最坏情景r* 合理性条件C ：只在满足一定合理 性（发生概率满足一定条件）的 市场情景中搜索。 𝑟𝑟∗ = 𝑎𝑎𝑟𝑟𝑎𝑎min 𝑟𝑟∈𝐷𝐷 }{𝑃𝑃(𝑟𝑟1, 𝑟𝑟2,⋅⋅⋅, 𝑟𝑟𝑛𝑛) 满足合理性条件C 的所有市场情景的 集合，称为允许域（Admissibility Domain），记为D。 3. 系统化压力测试 • 基本思路：转化为以下最优化问题 • 基本步骤： 27 合理性条件C 价值函数P（r） 允许域D 最坏情景r* 合理性条件C ：只在满足一定合理 性（发生概率满足一定条件）的 市场情景中搜索。 不同搜索方法： 因素推动方法 网格搜寻方法 Monte Carlo法和拟 Monte Carlo模拟法 𝑟𝑟∗ = 𝑎𝑎𝑟𝑟𝑎𝑎min 𝑟𝑟∈𝐷𝐷 }{𝑃𝑃(𝑟𝑟1, 𝑟𝑟2,⋅⋅⋅, 𝑟𝑟𝑛𝑛) 满足合理性条件C 的所有市场情景的 集合，称为允许域（Admissibility Domain），记为D。 3. 系统化压力测试 • Step 1：合理性条件以及允许域的确定： Case 1：不考虑风险因子之间相关性的情形 28 r1 0,2 2(1 )rkσ+ 0,1 1(1 )r kσ+ r0 𝐷𝐷 = (𝑟𝑟1,⋅⋅⋅, 𝑟𝑟𝑛𝑛 : 𝑟𝑟0,𝑖𝑖 1 − 𝑘𝑘𝜎𝜎𝑖𝑖 ≤ 𝑟𝑟𝑖𝑖 ≤ 𝑟𝑟0,𝑖𝑖 1 + 𝑘𝑘𝜎𝜎𝑖𝑖 , 𝑖𝑖 = 1,⋅⋅⋅, n} 3. 系统化压力测试 • Step 1：合理性条件以及允许域的确定： Case 2：考虑风险因子之间相关性的情形 D = {r : （r0 - r）Σ -1（r0 - r）T ≤ k2} 其中 Σ 为风险因子的变化 r - r0 的协方差矩阵。 29 � = 𝜎𝜎1 2 ⋯ 𝜎𝜎1𝑛𝑛 ⋮ ⋱ ⋮ 𝜎𝜎𝑛𝑛1 ⋯ 𝜎𝜎𝑛𝑛 2 3. 系统化压力测试 • Step 2：搜寻最坏情景 (1) 因素推动方法：  确定市场因子的最不利变化方向；  让各风险因子朝最不利变化方向移动给定数值，使组合价值减少最多；  并据此确定资产组合的最坏情景以及最坏情景下的资产组合价值。 30 r1 r2 0,1 1(1 )r kσ+ 0,2 2(1 )rkσ+ r0 3. 系统化压力测试 • Step 2：搜寻最坏情景 (2) 网格搜寻方法  把前面得到的“长方体”允许域进一步分割为若干小的长方体，每个小长 方体的顶点就对应着一个压力情景；  通过比较不同压力情景处资产组合价值的大小，可近似得到资产组合的最 坏情景。 31 r1 r2 0,1 1(1 )r kσ+ 0,2 2(1 )rkσ+ r0 3. 系统化压力测试 • Step 2：搜寻最坏情景 (3) Monte Carlo法和拟Monte Carlo方法  确定一个从 n 维单位长方体到 n 维空间中的长方体允许域的变换 T；  采用Monte Carlo或者拟Monte Carlo方法生成 N 个随机向量，可得到 N 个 压力情景 T(xi)；  分别计算所对应的资产组合价值，其中那个最小值所对应的压力情景就是 近似的最坏情景。 32 3. 系统化压力测试 33 Δr 变化的幅度 Δr* 因子变动 -0.1445 -0.10837 -0.0723 -0.03612 0 0.036125 0.07225 0.10837 0.1445 -0.422412 112558.8 127110.3 141655 156201.4 170741.1 185280.2 199817 214350 228881 -0.31681 69840.6 84392.08 98936.9 113483.2 128022.9 142562 157098 171632 186163 -0.21121 27145.44 41696.92 56241.8 70788.06 85327.73 99866.81 114403 128937 143468 -0.1056 -15531.55 -980.066 13564.8 28111.08 42650.74 57189.83 71726.3 86259.8 100791 0 -58182.29 -43630.8 -29086 -14539.7 1.93E-05 14539.08 29075.6 43609.1 58140.4 0.105603 -100812.1 -86260.6 -71716 -57169.4 -42629.8 -28090.7 -13554 979.3 15510.6 0.211206 -143419.7 -128868 -114323 -99777 -85237.4 -70698.3 -56162 -41628.3 -27097 0.316809 -186005.1 -171454 -156909 -142362 -127823 -113284 -98747 -84213.8 -69682.5 0.4224121 -228568.5 -214017 -199472 -184926 -170386 -155847 -141311 -126777 -112246 本章目录 • 1.为什么要进行压力测试 • 2.情景分析法 • 3.系统化压力测试 • 实验8：某商业银行存贷款业务压力测试（情景分析法） • 实验8’：用DerivaGem软件模拟压力测试（系统化压力测试） 34 实验8’：用DerivaGem软件模拟压力测试 • 实验：假定某金融机构持有4份关于某资产的欧式看涨期权，资产价格为50美 元，无风险利率为3%，波动率为20%，资产本身不提供任何收入。下表是头 寸、价格等信息。 • 假设资产价格在40-60美元之间，波动率介于10%-30%之间。 • 用DerivaGem软件搜索一天内最坏情景，此时资产价格和波动率分别降至 45.99美元和10%，最大损失为289.38美元。 35 头寸（千美元） 执行价格 期限（年） 头寸价值（千美元） 250 50 1.0 1176.67 -125 60 1.5 -293.56 -75 40 0.8 -843.72 -50 55 0.5 -65.30 总计 -25.90 本章结束 36","libVersion":"0.2.4","langs":""}