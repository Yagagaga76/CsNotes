## 图形界面开发

### ViewTree
- ![image.png|450](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240124112019.png)
- 输出：通过 GUI 的变化实现输出及变化
- 输入：视图可以具有输入处理程序，视图树控制如何处理鼠标和键盘输入
- 布局：使用容器对容器内部的元素进行布局

### MVC
- 前后端分离：Model-View-Controller pattern
	- MVC 模式通过明确**分离数据**（Model），**表示**（View），和**用户交互**（Controller）的职责
- 后端：处理输入得到输出，放入模型。维护特定于应用程序的数据并提供对该数据的访问。
- 前端：控制器处理输出，视图处理输出

- 模型
	- 模型通常是**可变的**，并提供方法安全地改变状态，同时保持其表示不变性。
	- 模型必须在数据**发生变化时通知其客户端**，以便依赖的视图可以**更新显示**，依赖的控制器可以适当响应。
	- 模型使用监听器模式实现通知机制，在该模式下，感兴趣的**视图和控制器**将自己**注册**为模型生成的变更事件的监听器。
- 视图
	- 视图负责输出，视图查询模型获取数据，并在屏幕上绘制这些数据。
	- 视图监听来自模型的**变化**，以便能够更新屏幕以反映这些变化。
- 控制器
	- 控制器处理输入，控制器是用户输入的前端，负责处理如点击、滚动、按键等操作。
	- 控制器根据用户的输入指令模型进行更新。
- ![image.png|475](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240124114936.png)

- 为了保持GUI的响应性，耗时的任务应该在后台运行，同时保证与GUI相关的操作在正确的线程（事件分发线程）中执行

### 监听者模式
- GUI 的输入控制使用监听者模式
- 事件源生成一个**离散事件流**，该流与源中的状态转换相对应。一个或多个侦听器将兴趣(订阅)**注册**到事件流，提供一个在发生新事件时调用的函数。
	- **顶级事件循环**从鼠标和键盘读取输入
	- 对于每个输入事件，它在树中找到**正确的视图**(通过查看鼠标的 x，y 位置) ，并将事件发送给该视图的侦听器。
	- 侦听器执行它的任务(可能涉及修改视图树中的对象) ，然后**立即**（保证响应性能）返回到事件循环。

