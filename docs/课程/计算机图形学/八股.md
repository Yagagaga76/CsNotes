## 图形学

- 渲染管线

### 坐标变化

- 模型变化：平移旋转缩放
- 视图变换：摄像机坐标、指向、旋转
- 投影变换：正交投影、透视投影
- 常见坐标系：
  - 模型坐标系：定义对象的形状和结构
  - 世界坐标系：定义对象再游戏世界中的位置和方向
  - 视图坐标系：即相机坐标系，从特定观察点看向场景使用的坐标系，世界坐标系中的对象通过视图变换被转换到视图坐标系中
  - 裁剪坐标系：在视图坐标系之后，场景会经过**投影变换**（正交或透视）被转换到裁剪坐标系。这一步涉及到确定哪些部分的场景应该被**渲染到屏幕上**，哪些部分应该被裁剪掉。投影变换同时也将3D场景转换成了2D图像加上深度信息的形式。
  - 规范设备坐标系
  - 屏幕坐标系
- 坐标系的转化：
  - 模型坐标系 -> 世界坐标系：通过模型变换。
  - 世界坐标系 -> 视图坐标系：通过视图变换。
  - 视图坐标系 -> 裁剪坐标系：通过投影变换。
  - 裁剪坐标系 -> 规范化设备坐标系：通过透视除法。
  - 规范化设备坐标系 -> 屏幕坐标系：通过视口变换。

### 光栅化

- **抗锯齿**
  - 之所以会出现锯齿（走样）是因为出现了**频谱混叠**（后面有讲）
  - 模糊（卷积）可以减少重叠，减少走样（先模糊再采样）计算量太大
  - 向像素内部添加更多采样点，根据覆盖采样点的数目决定模糊状态（不透明度）MSAA多采样抗锯齿
- **深度缓冲**（深度测试）：绘制深度不同具有遮挡关系的不同图像，决定哪些表面应该被渲染到屏幕上
  - 深度图-储存每个像素对应的**最浅的深度**（深度缓冲）
  - 结果图-储存最终的结果（根据深度图决定覆盖关系）
    - 如果当前片段的深度值**小于或等于缓冲区中存储的值**（表示当前片段更靠近观察者），则片段的颜色和深度值会被写入颜色缓冲和深度缓冲中，**覆盖原有值。**
    - 如果当前片段的深度值大于缓冲区中的值（表示当前片段被其他物体遮挡），则该片段被丢弃，不会影响最终图像。

### 着色

- 光照模型：
  - 三要素：高光、漫反射、环境光
  - 

- mipmap
- 延迟渲染

## 物理基础

- 碰撞检测

## 杂项

- 四叉树：一种树形数据结构，用于高效地**管理和查询二维空间中的数据**。它通过递归地将二维空间划分为四个象限或子区域来工作。四叉树广泛应用于图形处理、空间索引和碰撞检测等领域。
  - <img src="https://thdlrt.oss-cn-beijing.aliyuncs.com/v2-f629012f5c83d446542c4fa024c6d007_b.jpg" alt="img" style="zoom: 67%;" />
  - **构建四叉树**：首先，基于所有点的坐标构建四叉树。这个过程中，我们会**逐渐将空间细分**，直到每个节点所代表的区域内的**点的数量不超过预设阈值**或达到**最大分裂深度。**
  - **执行查询**：要查询特定区域内的点，我们从根节点开始遍历四叉树。对于每个节点，我们检查该节点代表的区域**是否与查询区域相交**：
    - 如果不相交，我们忽略该节点及其所有子节点。
    - 如果**相交**，我们**继续检查**该节点的子节点。
    - 如果当前节点是叶节点（没有子节点），我们检查它包含的点是否在查询区域内，并处理这些点。