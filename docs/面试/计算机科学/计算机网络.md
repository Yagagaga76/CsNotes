### 体系结构
- OSI 7 层结构：
	- 应用层：通过应用程序间的交互来完成特定的网络应用
	- 表示层：解释交换数据的含义。该层提供的服务主要包括数据压缩，数据加密以及数据描述。
	- 会话层：负责建立、管理和终止表示层实体之间的通信会话。该层提供了数据交换的定界和同步功能，包括了建立检查点和恢复方案的方法。
	- 传输层：负责因特网中两台主机的进程提供通信服务。
	- 网络层：选择合适的网间路由和交换节点，确保数据按时成功传送。
	- 数据链路层 (链路层)：数据链路层将网络层交下来的 IP 数据报组装成帧，在两个相邻节点间的链路上传送帧。
	- 物理层：实现计算机节点之间比特流的透明传送，尽可能屏蔽掉具体传输介质和物理设备的差异。该层的主要任务是确定与传输媒体的接口的一些特性 
- TCP/IP 五层模型：
	- 应用层 ：为特定应用程序提供数据传输服务。
	- 传输层 ：为进程提供通用数据传输服务。
	- 网络层 ：为主机提供数据传输服务。而传输层协议是为主机中的进程提供数据传输服务。
	- 数据链路层 ：网络层针对的还是主机之间的数据传输服务，而主机之间可以有很多链路，链路层协议就是为同一链路的主机提供数据传输服务。
	- 物理层 ：负责比特流在传输介质上的传播。

### 应用层
#### 万维网和域名
- URI：统一资源标识符
	- **标识**某一互联网**资源**名称的字符串
- URL：统一资源定位符
	- 是 URI 的一个**子集**，不仅标识资源，而且提供了找到该资源的方法
	- 三部分组成：协议类型+web 地址（ip+端口）+资源地址 ![image.png|425](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240309224933.png)

- 应用程序体系架构：CS、P2P

- 常见 web 组件
	- 代理
		- 位于**客户端和服务器之间**的 http 中间实体。
		- 代理做为转发所有 Web 流量的可信任中间节点使用，可以对**请求和响应进行过滤**
	- 网关
		- 连接其他应用程序的特殊 web 服务器。
		- 常用于将 http 流量**转化为其他的协议**。网关接受请求时就好像自己本身是资源源服务器一样，客户端对此无感知。
	- 隧道
		- 对 http 通信报文进行盲转发的**特殊代理**。
		- 道主要用于跨越不兼容的网络环境，通过封装和**加密**来安全传输数据。

- DNS 工作原理
	- 客户端首先**检查本地 hosts 文件**，检查是否有缓存的映射关系
	- 查找**本地 DNS 解析器缓存**
	- 根据设置的首选 dns 服务器 ip，**查询本地服务器**
	- 本地 DNS 服务器查找失败后会访问根域名服务器，再找到对应的顶级域名服务器，然后向下不断查找
	- ![image.png|475](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240309230905.png)
- DNS 服务器分类
	- 根域名服务器：最高层次的域名服务器，所有的根域名服务器都知道**所有的顶级域名服务器的 ip 地址**
	- 顶级域名服务器：负责处理所有顶级域名，提供到权威域服务器的映射。
	- 授权 (权威)域名服务器：提供主机名到 IP 地址间的映射服务
	- 主域名服务器：一个或多个区域域名解析工作的主要域名服务器，通常**也是**一个或多个区域的**授权域名服务器。**
	- 辅助域名服务器：协助主域名服务器提供域名查询服务，在主机很多的情况下，可以有效**分担**主域名服务器的**压力**。当主域名服务器**故障**时，辅助域名服务器能够在数据有效期内继续为主机提供域名解析服务。
- DNS 的数据传输方式
	- 既采用 udp 协议也采用 tcp 协议
	- **默认是采用 udp** 协议进行数据传输的；
	- 当返回的响应超过 512 字节时、或进行区域传送（主域名服务器向辅助域名服务器传输变化）时使用 TCP

- 网业解析的过程
	- 用户输入网址
	- **dns 解析**得到 ip 地址
	- 向 web 服务器**发起 TCP 连接**
	- **发送 http 请求**：http 请求是建立在 TCP 连接中的
	- web 服务器**处理请求并返回**
	- 浏览器**渲染网页**
	- **断开连接**

#### HTTP
- 报文结构
	- 简略信息：请求方法、url、版本等
	- 头部 header
	- 内容主体
```http
// 第一部分：简略信息
GET https://leetcode.cn/problemset/all/ HTTP/1.1.  
// 第二部分：请求首部或者响应首部
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9
Accept-Encoding: gzip, deflate
Accept-Language: zh-CN,zh;q=0.9,en;q=0.8
Cache-Control: max-age=0
Host: leetcode.cn
If-Modified-Since: Thu, 17 Oct 2019 07:18:26 GMT
If-None-Match: "3147526947+gzip"
Proxy-Connection: keep-alive
Upgrade-Insecure-Requests: 1
User-Agent: Mozilla/5.0 xxx
// --------- 空行 --------------
// 第三部分，内容主体
param1=1&param2=2
```

- post 与 get 的区别
	- get 提交的数据会放在 **url 之后**，post 提交的数据放在 **body 上**。get 请求参数会以 url 的形式完整的保留在浏览器的记录里，会存在**安全问题**。post 可以进行复杂的加密，get 则不可以, 并且 get 提交的**数据大小有限制**
	- get 方法**不会改变服务器状态**，而 post 会改变服务器的状态，从这个角度来看，get 方法更安全。
	- get 方法对于服务器更安全，post 方法对于客户端更安全.
- http 状态码
	- 200：成功返回响应
	- 301：永久重定向，客户端第一次访问此 url 时，告知客户端以后直接访问新的 url，该状态保存在浏览器缓存中。
	- 302；临时重定向，客户端每次访问此 url 时，告知客户端重定向到新的 url ，后续访问依然访问当前的 url。
	- 400：发送的请求错误，请求格式错误，或者没有服务器要求的数据。
	- 401：没有权限访问，当前用户没有权限访问此资源。
	- 403: 请求被服务器禁止。
	- 404：请求的 url 不存在，一般是 url 出错。
	- 500： 服务器处理请求出现错误。
	- 501：服务器超出能力之外的方法，例如：请求的方法服务器不支持。
	- 504：来自网关或者代理服务器，请求资源服务器时超时。

- 首部类型：
	- 通用首部字段、请求首部字段、响应首部字段、实体首部字段
	- ![image.png|500](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240309234447.png)
	- ![image.png|500](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240309234453.png)
	- ![image.png|500](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240309234458.png)
	- ![image.png|500](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240309234503.png)

- 连接管理
	- 长连接只需要建立一次 tcp 连接就能进行多次 http 通信，短连接每个 http 请求就要建立一次 tcp 连接。（页面上有多个媒体资源可能需要短时间内频繁通信，此时短连接的效率较低）
	- 从 http/1.1 开始**默认是长连接的**（需要由客户端或者服务器端提出断开）在 http/1.1 之前默认是短连接的
	- 流水线是在同一条长连接上**连续发出请求**，而不用等待响应返回，这样 http 的速度会快很多，tcp 连接的利用率也会非常高。、
- 无状态协议和 cookie
	- http 是一种不保存状态，即**无状态协议。**
	- 服务器可以通过 session 或者 cookie 来直到请求从哪个客户端发送
	- **session**：客户端第一次发送信息到服务器时，服务器为该客户端**创建一个 session 对象**，该 session 包含客户端身份信息，同时为该 session 生**成一个 sessionId** 。服务端将这个 sessionId 分配给客户端，客户端**发送请求时带有此 sessionId** ，服务端就可以区分客户端。
		- 存储在**服务器端**。更加安全
	- **cookie**：客户端第一次发送信息到服务器时，服务器根据该客户端信息编码加密生成一个 cookie。服务端将此 cookie 发送给客户端，客户端**发送请求时带有此 cookie** ，服务端就可以区分客户端。
		- 存储在**客户端**浏览器，cookie **携带着用户信息**
- http 的安全性问题：明文通讯、不验证身份、无法验证报文完整性

- https
	- https 数据发送时 request 通过 **ssl/tls 进行处理**，然后再通过 tcp 进行发送；数据接收时，同样也是要通过 ssl/tls 进行处理。相当于在应用层 http 和传输层 tcp 之间多加了一步处理
	- **数据加密**：首**先通过非对称加密**（获取公钥时使**用数字证书**避免篡改），传输对称加密所需的密钥，**然后使用密钥进行通信**加密。这样既兼顾了安全性，又有了更高的运算速度。
	- **数字证书认证**：服务器事先向数字证书机构申请数字证书，数字证书机构对数据做数字签名，然后将数据和数字签名打包在一起，做成数字证书，发送给服务端；https 通信时，服务器把**数字证书**发给客户端。客户端取得其中的数据和数字签名，使用数字证书机构的公开密钥验证数据和数字签名是否合法（**确认服务端身份**）
	- **检验报文完整性**：https 的报文摘要功能之所以安全，是因为它结合了加密和认证这两个操作；**加密 + 摘要检验 + 认证 = 数据完整**
	- 缺点：https 虽然通讯安全但是相比 http 使用价格昂贵并且速度稍慢
- websocket
	-  普通 CS 模式下服务端**不能主动给客户端发送数据**，需要客户端轮训服务端效率是十分低下。
	- websocket 的出现就是为了解决这个问题，web 浏览器与 web 服务器之间**全双工通信**标准
	- 建立在 tcp 协议之上。握手阶段采用 http 协议

#### 其他
- CDN：内容分发网络
	- **更快**地将数据**分发**给用户；
	- 通过部署多台服务器，从而提高系统整体的带宽**性能；**
	- 多台服务器可以看成是一种**冗余**机制，从而具有高可用性。

- 套接字：网络中**不同主机上的应用进程**之间进行通信的接口（ip+端口）
	- socket 由 ip 地址、端口号和协议组成 (协议只有 tcp 和 udp)
	- 地址包括协议，所以同一个 ip 同一个 port 可以支持两个进程，一个 TCP 进程，一个 UDP 进程。

- 常用端口
	- DNS：53
	- HTTP：80
	- HTTPS：443
### 传输层
#### UDP
- udp 只是做了传输协议能**够做的最少的工作**。除了复用/分解功能及少量的差错检测外，几乎没有在网络层协议上添加什么内容。

- udp 特点
	- 发送数据具有即时性，立即发送
	- 无需建立连接
	- 无连接状态
	- 首部数据较小，开销小效率高
- udp 报文结构
	- 源端口、目的端口（16 位）】
	- 报文长度（16 位）：表示数据报（报文头+数据）长度
	- 校验值
#### TCP
- 三次握手建立连接
	- 客户端向服务端发送 SYN （请求建立连接）包，序列号 Seq=x
	- 服务端结束 LISTERN 阶段，返回 TCP 报文：标志位为 SYN 和 ACK 序号为 Seq=y（自己的初始序列号），确认号 Ack=x+1 表示收到请求
	- 客户端收到 SYN+ACK 包后发送 ACK 序号为 Seq=x+1 确认号为 Ack=y+1
	- 服务器收到后完成三次握手建立连接
	- ![image.png|375](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240310213242.png)
- 为什么要进行三次握手
	- 确认客户端和服务端都可以**正常发送接收数据。**
	- ![image.png|375](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240310214331.png)

- 四次挥手关闭连接
	- 客户端发送 FIN 报文表示要释放 TCP 连接 Seq=u
	- 服务器收到后回顾 ACK=u+1 确认 Seq=v
	- 服务器发送 ACK 后会将遗留带传数据传送到客户端，完成后就也做好了释放服务端到客户端连接的准备，发送 FIN+ACK，Seq=w，ACK=u+1
	- 客户端收到后回复 ACK=w+1, Seq=u+1 确认服务器已经准备好释放连接
	- ![image.png|375](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240310214851.png)
- 为什么要进行四次挥手
	- 
	- ![image.png|375](https://thdlrt.oss-cn-beijing.aliyuncs.com/20240310214346.png)


- 可靠传输
	- 
### 网络层
#### IP

### 数据链路层
#### MAC

### 物理层

### 网络安全
#### DDos
#### ARP
#### AES 和 RSA